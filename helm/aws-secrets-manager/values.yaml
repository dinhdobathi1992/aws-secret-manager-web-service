# Default values for aws-secrets-manager
replicaCount: 1

image:
  repository: dinhdobathi/aws-secrets-manager
  tag: "1.0.0"
  pullPolicy: IfNotPresent

serviceAccount:
  create: true
  name: "aws-sm-service"
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::457085052934:role/aws-sm-service"
    eks.amazonaws.com/sts-regional-endpoints: "true"

service:
  type: ClusterIP
  port: 5001

ingress:
  enabled: true
  annotations:
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: "ip"
    alb.ingress.kubernetes.io/group.name: aws-sm-service
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS":443}]'
    alb.ingress.kubernetes.io/actions.ssl-redirect: "443"
    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:ap-southeast-1:457085052934:certificate/aece225c-4f23-41f4-be46-56e22166362c
    alb.ingress.kubernetes.io/healthcheck-path: /health/liveliness
  className: alb
  hosts:
    - host: sm.ddbt.info
      paths:
        - path: /
          pathType: Prefix

env:
  FLASK_ENV: "development"
  FLASK_DEBUG: "1"
  FLASK_APP: "app"

secrets:
  azure:
    AZURE_CLIENT_ID: "01d87284-0804-40df-ad29-ae88587f9607"
    AZURE_CLIENT_SECRET: "change-me"
    AZURE_TENANT_ID: "23131c9d-5769-486a-851b-18c604ca85cf"
    AZURE_REDIRECT_URI: "https://sm.ddbt.info/auth/callback"
    AZURE_GROUP_SECRETS_READERS: "27325b00-5696-404c-a09e-1c0929cca11b"
    AZURE_GROUP_SECRETS_WRITERS: "da48e02c-94ad-425e-9392-786406505343"
    FLASK_SECRET_KEY: "dinhd0b@thi"

configMap:
  AWS_ACCOUNTS: |-
    {
      "development": {
        "name": "Development Account",
        "role_arn": "arn:aws:iam::457085052934:role/aws-sm-service",
        "aws_region": "us-east-1",
        "description": "Development environment"
      },
      "production": {
        "name": "Production Account2",
        "role_arn": "arn:aws:iam::457085052934:role/aws-sm-service",
        "aws_region": "ap-southeast-1",
        "description": "Production environment"
      },
      "staging": {
        "name": "Staging Account",
        "role_arn": "arn:aws:iam::457085052934:role/aws-sm-service",
        "aws_region": "ap-southeast-1",
        "description": "Staging environment"
      },
      "pre-prod": {
        "name": "Pre-Production Account",
        "role_arn": "arn:aws:iam::457085052934:role/aws-sm-service",
        "aws_region": "ap-southeast-1",
        "description": "Pre-Production environment"
      }
    }

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi
